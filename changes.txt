===================================================================================
===================================================================================

ЛБv6 Общая часть
Версия 5.3.7 от 07.06.20.
- Добавлено формирование IFD: сигнатуры
- Исправлена ошибка неотключения лифта при наличии ошибки станции TBL:SUFFIX:PREFIX
- Исправлена ошибка игнорирования наличия сервисного ключа при отсутствии связи с ЛШ/диспетчерской.
- Решена проблема ложного формирования сигнала ВЫЗОВ при яч 214=0 (Вызов 0 сек) и команде ОТКЛ ЛИФТ.

===================================================================================
===================================================================================
ЛБv6Pro Общая часть
Версия 6.3.7 от 07.06.20.
- Добавлено формирование IFD: сигнатуры
- Исправлена ошибка неотключения лифта при наличии ошибки станции TBL:SUFFIX:PREFIX
- Исправлена ошибка игнорирования наличия сервисного ключа при отсутствии связи с ЛШ/диспетчерской.
- Решена проблема ложного формирования сигнала ВЫЗОВ при яч 214=0 (Вызов 0 сек) и команде ОТКЛ ЛИФТ.
- MQTT DIT - исправлено ошибка передачи сигнала точной остановки d_to-> d_dto.
- При прерывании работы речевого информатора включением ГГС - принудительно остановка Play_Stop()
- LKDSOpen - добавлен TAG11 cостояние лифта V5/7 (Модель данных MPult/SPult )
- IAP3-7 добавлена передача TimeStamp даты создания прошивки
- Обновление времени RTC ЛБ производится только в моменты получения данных от NTP серверов
- Расширен Class4:Type10:Msg1 Команда рестарт ЛБ
- Исправлена ошибка Class4:Type10:Msg0:TAG00 передачи номера сервисного ключа
- Разрешена отправка признака движения в основном пакете состояния

===================================================================================
===================================================================================
ЛБv7 Общая часть
Версия 7.1.2 от 07.06.20.
- Добавлено формирование IFD: сигнатуры
- Исправлена ошибка неотключения лифта при наличии ошибки станции TBL:SUFFIX:PREFIX
- Исправлена ошибка игнорирования наличия сервисного ключа при отсутствии связи с ЛШ/диспетчерской.
- Решена проблема ложного формирования сигнала ВЫЗОВ при яч 214=0 (Вызов 0 сек) и команде ОТКЛ ЛИФТ.
- MQTT DIT - исправлено ошибка передачи сигнала точной остановки d_to-> d_dto.
- При прерывании работы речевого информатора включением ГГС - принудительно остановка Play_Stop()
- LKDSOpen - добавлен TAG11 cостояние лифта V5/7 (Модель данных MPult/SPult )
- IAP3-7 добавлена передача TimeStamp даты создания прошивки
- Обновление времени RTC ЛБ производится только в моменты получения данных от NTP серверов
- Расширен Class4:Type10:Msg1 Команда рестарт ЛБ
- Исправлена ошибка Class4:Type10:Msg0:TAG00 передачи номера сервисного ключа
- Вход USER с отображением на состояние "Пожарная опасность" активирует связь ППП
- Переработана работы с шиной CAN для поддержки большого числа устройств
- Оптимизирована загрузка шины CAN в установившемся режиме
- Исправлен счет HEAP при отсутствии памяти для realloc
- Добавлен сервис счета статистики, ошибок работы CAN.
- Добавлена поддержка запроса Class4:Type3:Msg31 - дай состояние CAN интерфейса.
- Решена проблема позднего обнаружения SDRIN ПУ.
- Решена проблема ложного включения музыки ПУ при выполнении теста "Проверка звука".
- Исправлена ошибка ESPConfig() - разрушающая содержимое ОЗУ.
- Добавлено наполнение Class4:Type10:Msg0:Tag06 при передаче на шину CAN
- Добавлено оповещение на шину CAN msg0 о рестарте ЛБ
- Добавлена поддержка аппаратной платформы с PDM микрофоном
- Запрет отката на предыдущие прошивки (включая обновление кодека и звуковой базы)
- Разрешена отправка признака движения в основном пакете состояния

===================================================================================
===================================================================================
Частности для ЛБv6, ЛБv6Pro, ЛБv7:

- ЭСК:
        - Исправлена ошибка формирования состояния движения при одновременном наличии КН,КВ или РОД,РЗД.
        - При остановке эскалатора - формируется признак "Аварийная блокировка"
        - Для фиксации "Аварийной блокировки" по остановке эскалатора установить триггерность яч119=1
        - Поддержана спецификация Class4:Type10 - эскалатор

- KONE_ESC:
        - При остановке эскалатора - формируется признак "Аварийная блокировка"
        - Для фиксации "Аварийной блокировки" по остановке эскалатора установить триггерность яч119=1
        - Поддержана спецификация Class4:Type10 - эскалатор

- THYSSEN_GEC:
        - При остановке эскалатора - формируется признак "Аварийная блокировка"
        - Для фиксации "Аварийной блокировки" по остановке эскалатора установить триггерность яч119=1
        - Поддержана спецификация Class4:Type10 - эскалатор

- FT9x0:
        - Исправлена ошибка получения информации о движении/остановке эскалатора
        - При остановке эскалатора - формируется признак "Аварийная блокировка"
        - Для фиксации "Аварийной блокировки" по остановке эскалатора установить триггерность яч119=1
        - Поддержана спецификация Class4:Type10 - эскалатор


- СОЮЗ:
        - Добавлено отображение вызовов.

- iAStar:
        - Добавлена поддержка STEP "NSPW01EN01    01"

- KRONA:
        - Изменена скорость обмена по CAN: 100kbit/s -> 125kbit/s

- OTIS:
        - Адаптивная инициализация контроллеров лифтов SWORD
        - Блокировка псевдокода рестарта 0xC2 для 0-3 фазы КА опроса.
        - Для эскалаторов заблокирован псевдокод рестарта 0xC1
        - При остановке эскалатора - формируется признак "Аварийная блокировка"
        - Для фиксации "Аварийной блокировки" по остановке эскалатора установить триггерность яч119=1
        - Поддержана спецификация Class4:Type10 - эскалатор

- OTIS XIZI:
        - Для эскалаторов OTIS XIZI=0 - bugfix формирования кодов ошибок
        - Для протокола XIZIOTIS=0 - добавлено получение и разбор кодов ошибок
        - При остановке эскалатора по ошибке - формируется состояние "Аварийная блокировка"
        - Для фиксации "Аварийной блокировки" по остановке эскалатора установить триггерность яч119=1
        - Поддержана спецификация Class4:Type10 - эскалатор

- DMG:
        - Дополнен адаптивный анализ DTO, накоплением в 200 пакетов для исключения ложного определения наличия датчика DTO.

- CLASSIC:
        - Модифицирован алгоритм табличного метода определения этажей (по замечаниям г.Нижневартовск)

- FST2:
        - Время измерения "Кабина между этажами" по таймеру - 224, но не менее 2 сек.
        - Яч 217 - Авария привода ДК - по умолчанию 25 сек
        - Улучшен алгоритм получения кода ошибки - Поддерживается код "36"
        - Отлажены алгоритмы контроля КЗ ЦБ для Auto Door и LockingDoor
        - Разрыв ЦБ - добавлен режим LockingDoor
        - Обнаруж КЗ ЦБ Locking - c_rkd=1 & c_rd=0 & c_dk2=1 в течении 5 сек.
        - Добавлена поддержка яч13=0 - AutoDoor, 13=1 - LockingDoor
        - Исправлена ошибка неполучения конфигурации - при наличии обмена
        - Добавлена возможность вкл.Лифт, если лифт откл и AUX или INSP 0->1.
        - FST_PD_AVER усредняется - по 10 отсчетам (1 sec) - и принимается решение по усредненным значениям
        - Оттестированы алгоритмы КЗ ЦБ для full auto и Lockdoor
        - Добавлена обработка error "72","77" как КЗ ЦБ
        - FST_SYSTEM=5 - дочитывание кода ошибки из журнала.

- KOLLMORGEN:
        - Добавлена поддержка Kollmorgen MPK4i

- MITSUBISHI:
        - Введена поддержка -1 этажа.
        - Добавлена поддержка кодов от 0x32 до 0x36 (-1..-5). Проверен только -1.

- LLC:
        - Время отправки пакетов присутствия увеличено с 300 до 2000ms в соответствии с SVT.

- VEGA:
        - Добавлена поддержка VIMEC2.
        - Добавлена поддержка VIMEC3.
        - Добавлена блокировка 53 ошибки, если зафикировано движение лифта
        - Исправлена ошибка расчета CRC пакета при отправке команды на этаж
        - Добавлено отображение кода ошибки 85 - Проникновение в шахту
        - Добавлен разбор режима
        - "Зажата кн СТОП" - 3 sec время срабатывания
        - Добавлено разделение таблицы кодов ошибок для VEGA, VIMEC2, VIMEC3, EURO00

- THYSSEN:
        - Исправлена ошибка ложного формирования "Разрыва ЦБ" при яч30=0 (если есть код ошибки в станции)
        - Исправлена ошибка ложного формирования "Разрыва ЦБ" при "подавленной" ошибке

- ШУЛК17:
        - Решена проблема отсутствия сообщения "Вызов принят" после переподключения станции управления.


- КОНЦЕНТРАТОР:
        - Добавлена поддержка счетчиков ТВ7,СПТ94x,ВКТ7

- ШУЛК32:
        - Формирование сообщений 81 и 82 блокируется на 5 минут - для исключения ложных срабатываний
        - По умолчанию таблица кодов ошибок "ШУЛМ"

- УКЛ/УЛ:
        - Добавлена поддержка новых кодов ошибок для станции управления УЭЛ (по согласованию с Э-ЛИФТ)

- SCHINDLER BIONIC:
        - Добавлена поддержка режима ПОЖАР.

- SODIMAS_QI:
        - Восстановлено получение пароля станции управления из КЭША

- SILVER:
        - Добавлена поддержка отрицательных этажей по "-"

- KONE:
        - Режим Alternative:
        - Исключены запросы характерные для обмена "Стандарт"
        - Добавлена поддержка команд управления лифтом Приказ, Вызов вверх / вниз

==================================================================================
===================================================================================
==================================================================================
===================================================================================

Обновление прошивок устройств на шине CAN.
==================================================================================
ПУv7    V0.1.8 от 05.06.2020
- Добавлено формирование IFD: сигнатуры
- Переработана работы с шиной CAN для поддержки большого числа устройств
- Оптимизирована загрузка шины CAN в установившемся режиме
- Оптимизировано время удаленного рестарта в зависимости от числа устройств на шине CAN
- Исправлен счет HEAP при отсутствии памяти для realloc
- Добавлен сервис счета статистики, ошибок работы CAN.
- Добавлена поддержка запроса Class4:Type3:Msg31 - дай состояние CAN интерфейса
- Bugfix потери источника вызова из-за фразы "Вызов принят" от ЛБ при еще неопределенном HostAddr.
- Добавлена фильтрация входных сигналов "сухой контакт" время накопления 500ms.
- Обновлены процедуры Remote Access SD (версия от 21.05.2020)
- IAP3-7 добавлена передача TimeStamp даты создания прошивки
- Добавлена программная фильтрация переменной составляющей входов
- Доопределена логика работы с адресом 252 - Adr_PU_KNS как с ПУ Приямка.
        - При работе от аккумулятора при уровне заряда менее 15% - зеленый внешний светодиод мерцает - низкий заряд батареи
        - При низком заряде аккумулятора и остановке работы ПУ - мерцает красный (желтый) светодиод - замените/зарядите батарею
- Если при старте устройства нажата кнопка внешний "Вызов",то:
        - не выполнять тест светодиодов
        - код рестарта RSTSLPKEY - выход из sleep по кнопке
        - при иниц-ции не выполняется рестарт WiFi модуля,
        - время начала иниц-ции WiFi модуля уменьшено с 1 сек до 300ms

==================================================================================
АПУ-1Н  V0.0.9 от 05.06.2020
- Добавлено формирование IFD: сигнатуры
- Переработана работы с шиной CAN для поддержки большого числа устройств
- Оптимизирована загрузка шины CAN в установившемся режиме
- Оптимизировано время удаленного рестарта в зависимости от числа устройств на шине CAN
- Исправлен счет HEAP при отсутствии памяти для realloc
- Добавлен сервис счета статистики, ошибок работы CAN.
- Добавлена поддержка запроса Class4:Type3:Msg31 - дай состояние CAN интерфейса
- Bugfix потери источника вызова из-за фразы "Вызов принят" от ЛБ при еще неопределенном HostAddr.
- Добавлена фильтрация входных сигналов "сухой контакт" время накопления 500ms.
- IAP3-7 добавлена передача TimeStamp даты создания прошивки
- Добавлена программная фильтрация переменной составляющей входов

==================================================================================
ЭПУv7   V0.1.6 от 05.06.2020
- Добавлено формирование IFD: сигнатуры
- Переработана работы с шиной CAN для поддержки большого числа устройств
- Оптимизирована загрузка шины CAN в установившемся режиме
- Оптимизировано время удаленного рестарта в зависимости от числа устройств на шине CAN
- Исправлен счет HEAP при отсутствии памяти для realloc
- Добавлен сервис счета статистики, ошибок работы CAN.
- Добавлена поддержка запроса Class4:Type3:Msg31 - дай состояние CAN интерфейса
- Bugfix потери источника вызова из-за фразы "Вызов принят" от ЛБ при еще неопределенном HostAddr.
- Добавлена фильтрация входных сигналов "сухой контакт" время накопления 500ms.
- IAP3-7 добавлена передача TimeStamp даты создания прошивки
- Добавлена программная фильтрация переменной составляющей входов

==================================================================================
АЗО-1  V0.0.3 от 05.06.2020
- Добавлено формирование IFD: сигнатуры
- Переработана работы с шиной CAN для поддержки большого числа устройств
- Оптимизирована загрузка шины CAN в установившемся режиме
- Оптимизировано время удаленного рестарта в зависимости от числа устройств на шине CAN
- Исправлен счет HEAP при отсутствии памяти для realloc
- Добавлен сервис счета статистики, ошибок работы CAN.
- Добавлена поддержка запроса Class4:Type3:Msg31 - дай состояние CAN интерфейса
- Добавлена фильтрация входных сигналов "сухой контакт" время накопления 500ms.
- IAP3-7 добавлена передача TimeStamp даты создания прошивки
- Добавлена программная фильтрация переменной составляющей входов

==================================================================================
Удлинитель WiFi  V0.0.7 от 05.06.2020.
- Добавлено формирование IFD: сигнатуры
- Переработана работы с шиной CAN для поддержки большого числа устройств
- Оптимизирована загрузка шины CAN в установившемся режиме
- Оптимизировано время удаленного рестарта в зависимости от числа устройств на шине CAN
- Исправлен счет HEAP при отсутствии памяти для realloc
- Добавлен сервис счета статистики, ошибок работы CAN.
- Добавлена поддержка запроса Class4:Type3:Msg31 - дай состояние CAN интерфейса
- IAP3-7 добавлена передача TimeStamp даты создания прошивки

==================================================================================
АСК-16  V0.0.9 от 05.06.2020.
- Добавлено формирование IFD: сигнатуры
- Переработана работы с шиной CAN для поддержки большого числа устройств
- Оптимизирована загрузка шины CAN в установившемся режиме
- Оптимизировано время удаленного рестарта в зависимости от числа устройств на шине CAN
- Исправлен счет HEAP при отсутствии памяти для realloc
- Отключен режим SLEEP - восстановлена скорость обмена на загруженной линии CAN
- Добавлен сервис счета статистики, ошибок работы CAN.
- Добавлена поддержка запроса Class4:Type3:Msg31 - дай состояние CAN интерфейса
- Добавлена фильтрация входных сигналов "сухой контакт" время накопления 500ms.
- IAP3-7 добавлена передача TimeStamp даты создания прошивки
- Добавлена программная фильтрация переменной составляющей входов
- Переработан алгоритм фильтрации входов

==================================================================================
АТУ-8*2 V0.1.1 от 05.06.2020.
- Добавлено формирование IFD: сигнатуры
- Переработана работы с шиной CAN для поддержки большого числа устройств
- Оптимизирована загрузка шины CAN в установившемся режиме
- Оптимизировано время удаленного рестарта в зависимости от числа устройств на шине CAN
- Исправлен счет HEAP при отсутствии памяти для realloc
- Отключен режим SLEEP - восстановлена скорость обмена на загруженной линии CAN
- Добавлен сервис счета статистики, ошибок работы CAN.
- Добавлена поддержка запроса Class4:Type3:Msg31 - дай состояние CAN интерфейса
- Добавлена фильтрация входных сигналов "сухой контакт" время накопления 500ms.
- IAP3-7 добавлена передача TimeStamp даты создания прошивки
- Добавлена программная фильтрация переменной составляющей входов
- Добавлена адаптивная Граница OS 36 из 100 - для режима OFF, 28 из 100 -  для режима ON
- Введена дополнительная проверка корректности OUTState при восстановлении после рестарта

==================================================================================
АРВ-8*6 V0.0.9 от 05.06.2020.
- Добавлено формирование IFD: сигнатуры
- Переработана работы с шиной CAN для поддержки большого числа устройств
- Оптимизирована загрузка шины CAN в установившемся режиме
- Оптимизировано время удаленного рестарта в зависимости от числа устройств на шине CAN
- Исправлен счет HEAP при отсутствии памяти для realloc
- Отключен режим SLEEP - восстановлена скорость обмена на загруженной линии CAN
- Добавлен сервис счета статистики, ошибок работы CAN.
- Добавлена поддержка запроса Class4:Type3:Msg31 - дай состояние CAN интерфейса
- Добавлена фильтрация входных сигналов "сухой контакт" время накопления 500ms.
- IAP3-7 добавлена передача TimeStamp даты создания прошивки
- Добавлена программная фильтрация переменной составляющей входов

==================================================================================
АТС4x4  V0.0.9 от 05.06.2020. (Адаптер токовых сигналов)
- Добавлено формирование IFD: сигнатуры
- Переработана работы с шиной CAN для поддержки большого числа устройств
- Оптимизирована загрузка шины CAN в установившемся режиме
- Оптимизировано время удаленного рестарта в зависимости от числа устройств на шине CAN
- Исправлен счет HEAP при отсутствии памяти для realloc
- Отключен режим SLEEP - восстановлена скорость обмена на загруженной линии CAN
- Добавлен сервис счета статистики, ошибок работы CAN.
- Добавлена поддержка запроса Class4:Type3:Msg31 - дай состояние CAN интерфейса
- Добавлена фильтрация входных сигналов "сухой контакт" время накопления 500ms.
- IAP3-7 добавлена передача TimeStamp даты создания прошивки
- Добавлена программная фильтрация переменной составляющей входов

==================================================================================
АЛИ-1 V0.0.2 от 05.06.2020. (Адаптер лампы индикаторной)
- Добавлено формирование IFD: сигнатуры
- Переработана работы с шиной CAN для поддержки большого числа устройств
- Оптимизирована загрузка шины CAN в установившемся режиме
- Оптимизировано время удаленного рестарта в зависимости от числа устройств на шине CAN
- Исправлен счет HEAP при отсутствии памяти для realloc
- Отключен режим SLEEP - восстановлена скорость обмена на загруженной линии CAN
- Добавлен сервис счета статистики, ошибок работы CAN.
- Добавлена поддержка запроса Class4:Type3:Msg31 - дай состояние CAN интерфейса
- Добавлена фильтрация входных сигналов "сухой контакт" время накопления 500ms.
- IAP3-7 добавлена передача TimeStamp даты создания прошивки
- Добавлена программная фильтрация переменной составляющей входов

==================================================================================
АПИ-1 V0.0.9 от 05.06.2020. (Адаптер последовательного интерфейса)
- Добавлено формирование IFD: сигнатуры
- Переработана работы с шиной CAN для поддержки большого числа устройств
- Оптимизирована загрузка шины CAN в установившемся режиме
- Оптимизировано время удаленного рестарта в зависимости от числа устройств на шине CAN
- Исправлен счет HEAP при отсутствии памяти для realloc
- Добавлен сервис счета статистики, ошибок работы CAN.
- Добавлена поддержка запроса Class4:Type3:Msg31 - дай состояние CAN интерфейса
- IAP3-7 добавлена передача TimeStamp даты создания прошивки
- Добавлено автоматическое определение наличия/отсутствия интерфейсной платы

==================================================================================
АMB-1 V0.0.2 от 05.06.2020. (Адаптер ModBUS)
- Добавлено формирование IFD: сигнатуры
- Переработана работы с шиной CAN для поддержки большого числа устройств
- Оптимизирована загрузка шины CAN в установившемся режиме
- Оптимизировано время удаленного рестарта в зависимости от числа устройств на шине CAN
- Исправлен счет HEAP при отсутствии памяти для realloc
- Добавлен сервис счета статистики, ошибок работы CAN.
- Добавлена поддержка запроса Class4:Type3:Msg31 - дай состояние CAN интерфейса
- IAP3-7 добавлена передача TimeStamp даты создания прошивки
- Добавлено автоматическое определение наличия/отсутствия интерфейсной платы

